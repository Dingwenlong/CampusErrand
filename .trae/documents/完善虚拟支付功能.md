## 完善支付功能开发计划

### 1. 后端接口开发

#### 1.1 扩展 TransactionService
- 添加 createTransaction 方法 - 创建交易记录
- 添加 recharge 方法 - 虚拟充值
- 添加 withdraw 方法 - 虚拟提现
- 添加 taskPayment 方法 - 任务支付
- 添加 taskIncome 方法 - 任务收入

#### 1.2 扩展 WalletController
- POST /wallet/recharge - 充值接口
- POST /wallet/withdraw - 提现接口
- POST /wallet/task-pay - 任务支付接口

#### 1.3 完善 TaskService
- 集成支付逻辑到任务发布
- 集成收入逻辑到任务完成

### 2. 前端开发

#### 2.1 创建页面
- pages/wallet/recharge.vue - 充值页面
- pages/wallet/withdraw.vue - 提现页面
- components/pay-password-modal.vue - 支付密码弹窗

#### 2.2 API封装
- 完善 api/wallet.js - 添加充值、提现、支付接口

#### 2.3 集成到任务流程
- 任务发布时调用支付接口
- 任务完成时自动转账

### 3. 虚拟支付逻辑
- 充值：直接增加余额，记录流水
- 提现：扣除余额，记录流水
- 任务支付：冻结→扣除赏金，记录流水
- 任务收入：增加接单者余额，记录流水

请确认此计划后，我将开始实现虚拟支付功能。